name = "cf-ai-local-tools-worker"
main = "src/index.ts"
compatibility_date = "2024-12-18"

# Bind the AI model
[ai]
binding = "AI"

# Durable Object for WebSocket relay (switchboard)
[[durable_objects.bindings]]
name = "SWITCHBOARD"
class_name = "UserSwitchboard"

# Durable Object migrations
[[migrations]]
tag = "v1"
new_classes = ["ConnectionManager"]

[[migrations]]
tag = "v2"
renamed_classes = [{from = "ConnectionManager", to = "UserSwitchboard"}]

# CORS settings
[env.production]
vars = { ENVIRONMENT = "production" }

[env.development]
vars = { ENVIRONMENT = "development" }
